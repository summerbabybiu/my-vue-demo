<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue Demo</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/vue.js"></script>
</head>
<body>
    <div id="app">
        <select-component v-bind:select_items="province_group" :selected.sync="selected_province"></select-component>
        <select-component v-bind:select_items="city_group" :selected.sync="selected_city"></select-component>
        <select-component v-bind:select_items="area_group" :selected.sync="selected_area"></select-component>

        <p><span>{{selected_province}}</span><span>{{province_name}} {{city_name}} {{area_name}}</span></p>
    </div>
    <script src="js/select-component.js"></script>

    <script>
        $.ajax({
            method: 'get',
            url: "/chinadata",
            type: "json",
            success: function (data) {
                createVue(data);
            }
        });

        function createVue(chinaAreaData){
            new Vue({
                el : "#app",
                data :  {
                    province_group: chinaAreaData[86],
                    selected_province: Object.keys(chinaAreaData[86])[0],
                    selected_city: Object.keys(chinaAreaData[110000])[0],
                    selected_area: null
                },
                computed : {
                    city_group: function () {
                        this.selected_city = Object.keys(chinaAreaData[this.selected_province])[0]
                        return chinaAreaData[this.selected_province]
                    },
                    city_name: function () {
                        return this.city_group[this.selected_city]
                    },
                    area_group: function () {
                        this.selected_area = Object.keys(chinaAreaData[this.selected_city])[0]
                        return chinaAreaData[this.selected_city]
                    },
                    area_name: function () {
                        return this.area_group[this.selected_area]
                    },
                    province_name: function () {
                        return chinaAreaData[86][this.selected_province]
                    }

                }
            });
        }


    </script>

</body>
</html>